图片性能优化

1. 选取合适的图片类型
   - 通常不能选
   - 如果可以的话，可以根据是否需要动画，是否支持透明等选用最合适的图片

2. Picture 元素
   - `<picture>` 元素通过包含零或多个 `<source>` 元素和一个 `<img>` 元素来为不同的显示/设备场景提供图像版本。
   - 浏览器会选择最匹配的子 `<source>` 元素，如果没有匹配的，就选择 `<img>` 元素的 src 属性中的 URL

3. 为不同DPR屏幕，提供恰当图片
   - 无脑：不管设备的 dpr 是否为 3，我们统一都使用 3 倍图
   - 媒体查询：要写的代码较多，可能存在一些介于 1~2，2~3 之间的 DPR 值，不好穷举出所有场景
   - CSS 配合 image-set：痛点与媒体查询方案类似
   - img标签 srcset+sizes属性w描述符

4. 图片懒加载
   - JS方案：方案1：监听 onscroll 事件，通过 `getBoundingClientRect` API ；方案2：利用IntersectionObserver
   - content-visibility: auto： 延迟渲染（只有在视窗的才会被渲染），但src会发送请求
   - img的loading="lazy"属性：如果图像位于可视区时，则立即加载图像

5. 图片异步解码：
   - HTML5  `decoding` 属性，sync：同步解码图像，保证与其他内容一起显示；`async`: 异步解码图像，加快显示其他内容

6. img 元素与 background 元素的取舍

   | 类型               | img                                        | backgroud-image          |
   | :----------------- | :----------------------------------------- | :----------------------- |
   | 图层位置           | 前景                                       | 背景                     |
   | 默认初始尺寸       | 不定                                       | 固定                     |
   | 是否会产生回流重绘 | 会                                         | 不会                     |
   | 图片加载失败       | 可以触发元素的 onerror 事件，展示 alt 属性 | 无法有效设置异常处理场景 |
   | 使用场景           | Logo、产品图片、广告图片                   | 装饰性无语义内容等       |

7. 图片的异常处理
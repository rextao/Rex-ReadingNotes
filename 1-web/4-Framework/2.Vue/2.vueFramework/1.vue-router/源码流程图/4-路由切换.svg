<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="89 14 2120 1554" width="2120" height="1554">
  <defs>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="black">
      <g>
        <path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
    <font-face font-family="Helvetica Neue" font-size="16" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <font-face font-family="PingFang SC" font-size="16" panose-1="2 11 8 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="80" slope="0" x-height="600" cap-height="860" ascent="1060.0021" descent="-340.0007" font-weight="600">
      <font-face-src>
        <font-face-name name="PingFangSC-Semibold"/>
      </font-face-src>
    </font-face>
    <font-face font-family="PingFang SC" font-size="16" panose-1="2 11 4 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="58" slope="0" x-height="600" cap-height="860" ascent="1060.0021" descent="-340.0007" font-weight="400">
      <font-face-src>
        <font-face-name name="PingFangSC-Regular"/>
      </font-face-src>
    </font-face>
  </defs>
  <metadata> Produced by OmniGraffle 7.11.5 
    <dc:date>2020-01-23 00:38:09 +0000</dc:date>
  </metadata>
  <g id="Canvas_1" stroke-dasharray="none" fill="none" fill-opacity="1" stroke="none" stroke-opacity="1">
    <title>Canvas 1</title>
    <rect fill="white" x="89" y="14" width="2120" height="1554"/>
    <g id="Canvas_1: Layer 1">
      <title>Layer 1</title>
      <g id="Line_134">
        <line x1="1752.5" y1="261.5" x2="1752.5" y2="287.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_132">
        <line x1="1752.5" y1="176.5" x2="1752.5" y2="202.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_120">
        <line x1="1332.5" y1="261.5" x2="1332.5" y2="287.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_118">
        <line x1="1332.5" y1="176.5" x2="1332.5" y2="202.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_104">
        <line x1="515" y1="1343" x2="515" y2="1369.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_102">
        <line x1="515" y1="1258" x2="515" y2="1284.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_99">
        <line x1="515" y1="1168.5" x2="515" y2="1199.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_89">
        <line x1="780" y1="788" x2="780" y2="814.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_83">
        <line x1="780" y1="673.5" x2="780" y2="699.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_81">
        <line x1="780" y1="588.5" x2="780" y2="614.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_76">
        <line x1="515" y1="673.5" x2="515" y2="699.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_74">
        <line x1="515" y1="588.5" x2="515" y2="614.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_71">
        <line x1="515" y1="503.5" x2="515" y2="529.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_68">
        <line x1="515" y1="364.5" x2="515" y2="390.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_66">
        <line x1="515" y1="279.5" x2="515" y2="305.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_43">
        <line x1="515" y1="176.5" x2="515" y2="202.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_41">
        <rect x="400.5" y="42.5" width="1046.5" height="49" fill="white"/>
        <rect x="400.5" y="42.5" width="1046.5" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 57.776)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="452.77" y="15">src/history/base.js</tspan>
        </text>
      </g>
      <g id="Graphic_40">
        <path d="M 221 15.5 L 325.5 15.5 C 338.75483 15.5 349.5 26.245166 349.5 39.5 L 349.5 94.5 C 349.5 107.75483 338.75483 118.5 325.5 118.5 L 221 118.5 C 207.74517 118.5 197 107.75483 197 94.5 L 197 39.5 C 197 26.245166 207.74517 15.5 221 15.5 Z" fill="white"/>
        <path d="M 221 15.5 L 325.5 15.5 C 338.75483 15.5 349.5 26.245166 349.5 39.5 L 349.5 94.5 C 349.5 107.75483 338.75483 118.5 325.5 118.5 L 221 118.5 C 207.74517 118.5 197 107.75483 197 94.5 L 197 39.5 C 197 26.245166 207.74517 15.5 221 15.5 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(202 23)" fill="#525356">
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="6.362" y="17">上接</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" y="17">src/index.js</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="17">的</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="4.73" y="39">init</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="39">函数最后，调用</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="10.77" y="61">transitionTo，以</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="24.914" y="83">hash History</tspan>
        </text>
      </g>
      <g id="Graphic_39">
        <rect x="400.5" y="127.5" width="229" height="49" fill="white"/>
        <rect x="400.5" y="127.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 133.552)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="35.572" y="15">transitionTo(location, </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="30.372" y="33.448">onComplete, onAbort)</tspan>
        </text>
      </g>
      <g id="Graphic_38">
        <rect x="400.5" y="212.5" width="229" height="67" fill="white"/>
        <rect x="400.5" y="212.5" width="229" height="67" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 213)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="85.5" y="17">调用：</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="4.756" y="39">this.confirmTransition(route, </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="62.972" y="61">onComplete</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="61">)</tspan>
        </text>
      </g>
      <g id="Line_3">
        <line x1="350.5" y1="67" x2="390.6" y2="67" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_60">
        <rect x="667" y="106.25" width="264.5" height="91.5" fill="white"/>
        <rect x="667" y="106.25" width="264.5" height="91.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(672 113.328)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="17">transitionTo</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="17">的两个回调都是：</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="37">const setupHashListener = () =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="55.448">        history.setupListeners()</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="73.896">}</tspan>
        </text>
      </g>
      <g id="Graphic_61">
        <rect x="667" y="212.5" width="325" height="239.5" fill="white"/>
        <rect x="667" y="212.5" width="325" height="239.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(672 219.786)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="17">onComplete</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="17">回调是：</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="37">() =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="55.448">  this.updateRoute(route)</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="73.896">  onComplete &amp;&amp; onComplete(route)</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="92.34399">  this.ensureURL()</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="110.79199">  if (!this.ready) {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="129.23999">    this.ready = true</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="147.68799">    this.readyCbs.forEach(cb =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="166.13599">      cb(route)</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="184.58398">    })</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="203.03198">  }</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="221.47998">},</tspan>
        </text>
      </g>
      <g id="Graphic_62">
        <path d="M 1053.5 212.5 L 1145.5 212.5 C 1158.7548 212.5 1169.5 223.24517 1169.5 236.5 L 1169.5 246.5 C 1169.5 259.75483 1158.7548 270.5 1145.5 270.5 L 1053.5 270.5 C 1040.2452 270.5 1029.5 259.75483 1029.5 246.5 L 1029.5 236.5 C 1029.5 223.24517 1040.2452 212.5 1053.5 212.5 Z" fill="white"/>
        <path d="M 1053.5 212.5 L 1145.5 212.5 C 1158.7548 212.5 1169.5 223.24517 1169.5 236.5 L 1169.5 246.5 C 1169.5 259.75483 1158.7548 270.5 1145.5 270.5 L 1053.5 270.5 C 1040.2452 270.5 1029.5 259.75483 1029.5 246.5 L 1029.5 236.5 C 1029.5 223.24517 1040.2452 212.5 1053.5 212.5 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(1034.5 219.5)" fill="#525356">
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="3.008" y="17">其中onComplete</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="33" y="39">回调就是</tspan>
        </text>
      </g>
      <g id="Line_63">
        <line x1="992" y1="277.63194" x2="1025.5214" y2="266.36504" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_64">
        <path d="M 1099.1319 211.5 L 1098.3871 150.80645 L 941.3999 151.43283" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_65">
        <rect x="400.5" y="315.5" width="229" height="49" fill="white"/>
        <rect x="400.5" y="315.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 329)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="28.388" y="17">confirmTransition函数</tspan>
        </text>
      </g>
      <g id="Graphic_67">
        <rect x="400.5" y="400.5" width="229" height="103" fill="#c0ffc0"/>
        <rect x="400.5" y="400.5" width="229" height="103" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 408)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="11.26" y="17">调用resolveQueue解析整个</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="45.468" y="39">record链，哪些是</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="25.932" y="61">updated,deactivated与</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="75.468" y="83">activated</tspan>
        </text>
      </g>
      <g id="Graphic_69">
        <text transform="translate(522 373.5)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="0" y="17">内部</tspan>
        </text>
      </g>
      <g id="Graphic_70">
        <rect x="400.5" y="539.5" width="229" height="49" fill="white"/>
        <rect x="400.5" y="539.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 553)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="6.972" y="17">拼接钩子函数执行队列queue</tspan>
        </text>
      </g>
      <g id="Graphic_72">
        <path d="M 114 489.5 L 343 489.5 C 356.25483 489.5 367 500.24517 367 513.5 L 367 614.5 C 367 627.7548 356.25483 638.5 343 638.5 L 114 638.5 C 100.74517 638.5 90 627.7548 90 614.5 L 90 513.5 C 90 500.24517 100.74517 489.5 114 489.5 Z" fill="white"/>
        <path d="M 114 489.5 L 343 489.5 C 356.25483 489.5 367 500.24517 367 513.5 L 367 614.5 C 367 627.7548 356.25483 638.5 343 638.5 L 114 638.5 C 100.74517 638.5 90 627.7548 90 614.5 L 90 513.5 C 90 500.24517 100.74517 489.5 114 489.5 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(95 498)" fill="#525356">
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="17">队列包含：</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="39">1. 在失活的组件里调用离开守卫</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="61">2. 调用全局的 beforeEach 守卫</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="83">3. 组件里调用 beforeRouteUpdate</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="105">4. 调用 beforeEnter</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="127">5.解析异步路由组件</tspan>
        </text>
      </g>
      <g id="Graphic_73">
        <rect x="400.5" y="624.5" width="229" height="49" fill="white"/>
        <rect x="400.5" y="624.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 638)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="42.332" y="17">定义迭代器iterator</tspan>
        </text>
      </g>
      <g id="Graphic_75">
        <rect x="400.5" y="709.5" width="229" height="49" fill="white"/>
        <rect x="400.5" y="709.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 723)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x=".012" y="17">runQueue(queue, iterator, cb)</tspan>
        </text>
      </g>
      <g id="Line_77">
        <line x1="629.5" y1="152" x2="657.1" y2="152" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_78">
        <line x1="629.5" y1="277.40103" x2="657.4525" y2="285.06687" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_79">
        <rect x="665.5" y="539.5" width="229" height="49" fill="white"/>
        <rect x="665.5" y="539.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(670.5 553)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="49.3" y="17">src/util/async.js</tspan>
        </text>
      </g>
      <g id="Graphic_80">
        <rect x="665.5" y="624.5" width="229" height="49" fill="white"/>
        <rect x="665.5" y="624.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(670.5 638)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="73.652" y="17">runQueue</tspan>
        </text>
      </g>
      <g id="Graphic_82">
        <rect x="665.5" y="709.5" width="229" height="78.5" fill="white"/>
        <rect x="665.5" y="709.5" width="229" height="78.5" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(670.5 715.75)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="6.972" y="17">实际就是：对于queue每一项</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="3.804" y="39">执行iterator，queue全部执行</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="8.588" y="61">完，执行runQueue的cb回调</tspan>
        </text>
      </g>
      <g id="Line_84">
        <line x1="591.38235" y1="709.5" x2="694.1907" y2="676.5237" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_85">
        <path d="M 954.5 709.5 L 1068 709.5 C 1081.2548 709.5 1092 720.2452 1092 733.5 L 1092 764 C 1092 777.2548 1081.2548 788 1068 788 L 954.5 788 C 941.2452 788 930.5 777.2548 930.5 764 L 930.5 733.5 C 930.5 720.2452 941.2452 709.5 954.5 709.5 Z" fill="white"/>
        <path d="M 954.5 709.5 L 1068 709.5 C 1081.2548 709.5 1092 720.2452 1092 733.5 L 1092 764 C 1092 777.2548 1081.2548 788 1068 788 L 954.5 788 C 941.2452 788 930.5 777.2548 930.5 764 L 930.5 733.5 C 930.5 720.2452 941.2452 709.5 954.5 709.5 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(935.5 715.75)" fill="#525356">
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="3.75" y="17">迭代器主要就是执行</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="12.55" y="39">queue每个钩子函</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="27.75" y="61">数，下节细讲</tspan>
        </text>
      </g>
      <g id="Line_86">
        <line x1="894.5" y1="748.75" x2="919.6" y2="748.75" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_88">
        <rect x="665.5" y="824" width="229" height="49" fill="white"/>
        <rect x="665.5" y="824" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(670.5 826.5)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="14.972" y="17">当queue里面函数全部执行</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="52.436" y="39">完，执行回调cb</tspan>
        </text>
      </g>
      <g id="Graphic_90">
        <rect x="400.5" y="909" width="572.5" height="165" fill="white"/>
        <rect x="400.5" y="909" width="572.5" height="165" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 915.932)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="17">cb</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="17">回调是：</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="37">() =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="55.448">  const postEnterCbs = []</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="73.896">  const isValid = () =&gt; this.current === route</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="92.34399">  const enterGuards = extractEnterGuards(activated, postEnterCbs, isValid)</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="110.79199">  const queue = enterGuards.concat(this.router.resolveHooks)</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="129.23999">  runQueue(queue, iterator, newCb)</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="147.68799">}</tspan>
        </text>
      </g>
      <g id="Line_93">
        <line x1="621" y1="760" x2="443.54117" y2="902.7936" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_94">
        <line x1="764.0236" y1="873" x2="745.9557" y2="900.7074" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_95">
        <rect x="400.5" y="1119.5" width="229" height="49" fill="white"/>
        <rect x="400.5" y="1119.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 1133)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="11.716" y="17">获取beforeRouteEnter钩子</tspan>
        </text>
      </g>
      <g id="Line_96">
        <line x1="368" y1="564" x2="390.6" y2="564" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_97">
        <path d="M 152 1179 L 345 1179 C 358.25483 1179 369 1189.7452 369 1203 L 369 1264 C 369 1277.2548 358.25483 1288 345 1288 L 152 1288 C 138.74517 1288 128 1277.2548 128 1264 L 128 1203 C 128 1189.7452 138.74517 1179 152 1179 Z" fill="white"/>
        <path d="M 152 1179 L 345 1179 C 358.25483 1179 369 1189.7452 369 1203 L 369 1264 C 369 1277.2548 358.25483 1288 345 1288 L 152 1288 C 138.74517 1288 128 1277.2548 128 1264 L 128 1203 C 128 1189.7452 138.74517 1179 152 1179 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(133 1189.5)" fill="#525356">
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="17">队列包含：</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="39">1. 在被激活的组件里调用 </tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="61">beforeRouteEnter</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="600" fill="#525356" x="0" y="83">2. 全局解析守卫beforeResolve</tspan>
        </text>
      </g>
      <g id="Graphic_98">
        <rect x="400.5" y="1209" width="229" height="49" fill="white"/>
        <rect x="400.5" y="1209" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 1211.5)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x=".588" y="17">与全局的beforeResolve拼接为</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="54.972" y="39">新的queue队列</tspan>
        </text>
      </g>
      <g id="Line_100">
        <line x1="370" y1="1233.5" x2="390.6" y2="1233.5" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_101">
        <rect x="400.5" y="1294" width="229" height="49" fill="white"/>
        <rect x="400.5" y="1294" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 1307.5)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x=".012" y="17">runQueue(queue, iterator, cb)</tspan>
        </text>
      </g>
      <g id="Graphic_103">
        <rect x="400.5" y="1379" width="229" height="49" fill="white"/>
        <rect x="400.5" y="1379" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(405.5 1381.5)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="13.5" y="17">调用完队列的两个钩子函数</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="36.436" y="39">后，执行新队列的cb</tspan>
        </text>
      </g>
      <g id="Graphic_105">
        <rect x="654" y="1239.5" width="274" height="328" fill="white"/>
        <rect x="654" y="1239.5" width="274" height="328" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(659 1244.916)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="17">cb</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="17">回调是：</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="37">() =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="55.448">  runQueue(queue, iterator, () =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="73.896">    if (this.pending !== route) {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="92.34399">      return abort()</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="110.79199">    }</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="129.23999">    this.pending = null</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="147.68799">    onComplete(route)</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="166.13599">    if (this.router.app) {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="184.58398">      this.router.app.$nextTick(() =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="203.03198">        postEnterCbs.forEach(cb =&gt; {</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="221.47998">          cb()</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="239.92798">        })</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="258.37598">      })</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="276.82397">    }</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="295.27197">  })</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="313.71997">}</tspan>
        </text>
      </g>
      <g id="Line_106">
        <line x1="593.8361" y1="1074" x2="549.99554" y2="1112.9268" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_107">
        <line x1="629.5" y1="1403.5" x2="644.1" y2="1403.5" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_108">
        <rect x="952.5" y="1379" width="229" height="49" fill="white"/>
        <rect x="952.5" y="1379" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(957.5 1392.5)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="27.116" y="17">执行</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" y="17">onComplete(route)</tspan>
        </text>
      </g>
      <g id="Line_109">
        <line x1="928" y1="1403.5" x2="942.6" y2="1403.5" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_113">
        <path d="M 1181.5 1404.0617 L 1207.6046 1404.1898 L 1205.6137 452 L 1001.4334 386.9915" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_114">
        <text transform="translate(1223 1163)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="0" y="17">onComplete</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="17">回调是</tspan>
        </text>
      </g>
      <g id="Graphic_116">
        <rect x="1218" y="127.5" width="229" height="49" fill="white"/>
        <rect x="1218" y="127.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1223 142.776)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="63.116" y="15">updateRoute</tspan>
        </text>
      </g>
      <g id="Graphic_117">
        <rect x="1218" y="212.5" width="229" height="49" fill="white"/>
        <rect x="1218" y="212.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1223 215)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="5.5" y="17">执行在路由初始化阶段设置的</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="84.436" y="39">cb函数</tspan>
        </text>
      </g>
      <g id="Graphic_119">
        <rect x="1218" y="297.5" width="229" height="49" fill="white"/>
        <rect x="1218" y="297.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1223 311)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="45.5" y="17">执行全局后置钩子</tspan>
        </text>
      </g>
      <g id="Graphic_121">
        <path d="M 1507 297.5 L 1550 297.5 C 1563.2548 297.5 1574 308.24517 1574 321.5 L 1574 322.5 C 1574 335.75483 1563.2548 346.5 1550 346.5 L 1507 346.5 C 1493.7452 346.5 1483 335.75483 1483 322.5 L 1483 321.5 C 1483 308.24517 1493.7452 297.5 1507 297.5 Z" fill="white"/>
        <path d="M 1507 297.5 L 1550 297.5 C 1563.2548 297.5 1574 308.24517 1574 321.5 L 1574 322.5 C 1574 335.75483 1563.2548 346.5 1550 346.5 L 1507 346.5 C 1493.7452 346.5 1483 335.75483 1483 322.5 L 1483 321.5 C 1483 308.24517 1493.7452 297.5 1507 297.5 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(1488 300)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x=".5" y="17">执行全局后</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="16.5" y="39">置钩子</tspan>
        </text>
      </g>
      <g id="Line_122">
        <line x1="1447" y1="322" x2="1472.1" y2="322" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_123">
        <path d="M 1019.6665 392.7967 L 1197.9713 279.5 L 1197.3853 166.60156 L 1208.1573 165.43746" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_124">
        <path d="M 1242 403 L 1423 403 C 1436.2548 403 1447 413.74517 1447 427 L 1447 457.5 C 1447 470.75483 1436.2548 481.5 1423 481.5 L 1242 481.5 C 1228.7452 481.5 1218 470.75483 1218 457.5 L 1218 427 C 1218 413.74517 1228.7452 403 1242 403 Z" fill="white"/>
        <path d="M 1242 403 L 1423 403 C 1436.2548 403 1447 413.74517 1447 427 L 1447 457.5 C 1447 470.75483 1436.2548 481.5 1423 481.5 L 1242 481.5 C 1228.7452 481.5 1218 470.75483 1218 457.5 L 1218 427 C 1218 413.74517 1228.7452 403 1242 403 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(1223 409.25)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="45.5" y="17">此回调函数先执行</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="6.036" y="39">updateRoute，然后执行上面</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="16.388" y="61">的回调setupHashListener</tspan>
        </text>
      </g>
      <g id="Line_126">
        <line x1="1332.5" y1="346.5" x2="1332.5" y2="392.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_127">
        <rect x="1638" y="127.5" width="229" height="49" fill="white"/>
        <rect x="1638" y="127.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1643 142.776)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="57.044" y="15">setupListeners</tspan>
        </text>
      </g>
      <g id="Graphic_128">
        <rect x="1638" y="42.5" width="229" height="49" fill="white"/>
        <rect x="1638" y="42.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1643 57.776)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="44.164" y="15">src/history/hash.js</tspan>
        </text>
      </g>
      <g id="Line_129">
        <path d="M 1448 442.3919 L 1594.4682 442.5718 L 1595.9362 155.68296 L 1628.1027 154.92629" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_130">
        <line x1="1752.5" y1="91.5" x2="1752.5" y2="117.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_131">
        <rect x="1638" y="212.5" width="229" height="49" fill="white"/>
        <rect x="1638" y="212.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1643 215)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="7.116" y="17">利用</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" y="17">addEventListener</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" y="17">设置事</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="85.5" y="39">件监听</tspan>
        </text>
      </g>
      <g id="Graphic_133">
        <rect x="1638" y="297.5" width="229" height="49" fill="white"/>
        <rect x="1638" y="297.5" width="229" height="49" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1643 300)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="37.5" y="17">事件内部，还是调用</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="17.02" y="39">transitionTo进行路由切换</tspan>
        </text>
      </g>
      <g id="Graphic_135">
        <path d="M 1943 212.5 L 2182 212.5 C 2195.2548 212.5 2206 223.24517 2206 236.5 L 2206 237.5 C 2206 250.75483 2195.2548 261.5 2182 261.5 L 1943 261.5 C 1929.7452 261.5 1919 250.75483 1919 237.5 L 1919 236.5 C 1919 223.24517 1929.7452 212.5 1943 212.5 Z" fill="white"/>
        <path d="M 1943 212.5 L 2182 212.5 C 2195.2548 212.5 2206 223.24517 2206 236.5 L 2206 237.5 C 2206 250.75483 2195.2548 261.5 2182 261.5 L 1943 261.5 C 1929.7452 261.5 1919 250.75483 1919 237.5 L 1919 236.5 C 1919 223.24517 1929.7452 212.5 1943 212.5 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(1924 215)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="1.108" y="17">如果支持popstate优先会设置popstate</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="38.156" y="39">事件，否则设置hashchange</tspan>
        </text>
      </g>
      <g id="Line_136">
        <line x1="1867" y1="237" x2="1908.1" y2="237" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_137">
        <path d="M 1944.3226 214.1129 L 2183.3226 214.1129 C 2196.5774 214.1129 2207.3226 224.85807 2207.3226 238.1129 L 2207.3226 239.1129 C 2207.3226 252.36774 2196.5774 263.1129 2183.3226 263.1129 L 1944.3226 263.1129 C 1931.0677 263.1129 1920.3226 252.36774 1920.3226 239.1129 L 1920.3226 238.1129 C 1920.3226 224.85807 1931.0677 214.1129 1944.3226 214.1129 Z" fill="white"/>
        <path d="M 1944.3226 214.1129 L 2183.3226 214.1129 C 2196.5774 214.1129 2207.3226 224.85807 2207.3226 238.1129 L 2207.3226 239.1129 C 2207.3226 252.36774 2196.5774 263.1129 2183.3226 263.1129 L 1944.3226 263.1129 C 1931.0677 263.1129 1920.3226 252.36774 1920.3226 239.1129 L 1920.3226 238.1129 C 1920.3226 224.85807 1931.0677 214.1129 1944.3226 214.1129 Z" stroke="#fcc04d" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <text transform="translate(1925.3226 216.6129)" fill="black">
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="1.108" y="17">如果支持popstate优先会设置popstate</tspan>
          <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="black" x="38.156" y="39">事件，否则设置hashchange</tspan>
        </text>
      </g>
    </g>
  </g>
</svg>
